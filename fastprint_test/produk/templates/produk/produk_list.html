{% extends "base.html" %}
{% block title %}Daftar Produk{% endblock %}
{% block content %}
{% load humanize %}

<h1 class="mb-4">Daftar Produk</h1>

<!-- Tombol filter -->
<div class="btn-group mb-3" role="group">
  <a href="{% url 'produk_list' %}" class="btn {% if active_filter == 'all' %}btn-success{% else %}btn-outline-success{% endif %}">
    Semua Produk
  </a>
  <a href="{% url 'produk_bisa_dijual' %}" class="btn {% if active_filter == 'bisa_dijual' %}btn-success{% else %}btn-outline-success{% endif %}">
    Produk Bisa Dijual
  </a>
  <a href="{% url 'produk_tambah' %}" class="btn btn-primary">
    Tambah Produk
  </a>
</div>

<!-- Tabel produk -->
<table class="table table-striped table-bordered">
  <thead class="table-dark">
    <tr>
      <th>ID</th>
      <th>Nama</th>
      <th>Harga</th>
      <th>Kategori</th>
      <th>Status</th>
      <th>Aksi</th>
    </tr>
  </thead>
  <tbody>
    {% for p in produk %}
    <tr>
      <td>{{ p.id_produk }}</td>
      <td>{{ p.nama_produk }}</td>
      <td>{{ p.harga }}</td>
      <td>{{ p.kategori.nama_kategori }}</td>
      <td>
        {% if p.status.nama_status == "bisa dijual" %}
          <span class="badge bg-success">{{ p.status.nama_status }}</span>
        {% else %}
          <span class="badge bg-danger">{{ p.status.nama_status }}</span>
        {% endif %}
      </td>
      <td>
        <a href="{% url 'produk_edit' p.id_produk %}" class="btn btn-sm btn-warning">Edit</a>
        <a href="{% url 'produk_hapus' p.id_produk %}" class="btn btn-sm btn-danger"
           onclick="return confirm('Yakin hapus produk ini?')">Hapus</a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}
